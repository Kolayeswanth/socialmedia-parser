<!DOCTYPE html>
<html>
<head>
    <title>Social Media Bot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .login-form {
            margin-bottom: 20px;
        }
        #logs {
            border: 1px solid #ccc;
            padding: 10px;
            height: 200px;
            overflow-y: scroll;
        }
    </style>
</head>
<body>
    <h1>Social Media Bot</h1>
    

    <div class="login-form">
        <h2>WhatsApp Login</h2>
        <button onclick="startWhatsAppBot()">Start WhatsApp Bot</button>
    </div>

    <div id="qrCodeContainer" style="display: none;">
        <h3>Scan QR Code</h3>
        <img id="qrCode" src="" alt="QR Code">
        <button onclick="confirmQRScan()">Confirm QR Code Scanned</button>
    </div>
    <h2>Logs</h2>
    <div id="logs"></div>

    <script>
        const { ipcRenderer } = require('electron');

async function startWhatsAppBot() {
    clearLogs();
    try {
        const result = await ipcRenderer.invoke('start-whatsapp-bot');
        if (result.success) {
            addLog('WhatsApp bot completed successfully');
        } else {
            addLog(`WhatsApp bot failed: ${result.error}`);
        }
    } catch (error) {
        addLog(`Error starting WhatsApp bot: ${error.message}`);
    }
}

function showQRCode(qrCodeDataUrl) {
    const qrCodeContainer = document.getElementById('qrCodeContainer');
    const qrCodeImg = document.getElementById('qrCode');
    qrCodeImg.src = qrCodeDataUrl;
    qrCodeContainer.style.display = 'block';
}

function confirmQRScan() {
    ipcRenderer.send('qr-code-scanned');
    document.getElementById('qrCodeContainer').style.display = 'none';
}

ipcRenderer.on('show-qr-code', (event, qrCodeSrc) => {
    showQRCode(qrCodeSrc);
});

ipcRenderer.on('update-logs', (event, message) => {
    addLog(message);
});

function addLog(message) {
    const logsDiv = document.getElementById('logs');
    logsDiv.innerHTML += `<p>${message}</p>`;
    logsDiv.scrollTop = logsDiv.scrollHeight;
}

function clearLogs() {
    document.getElementById('logs').innerHTML = '';
}

    </script>
</body>
</html>